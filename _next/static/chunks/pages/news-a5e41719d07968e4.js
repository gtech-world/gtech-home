(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{8729:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/news",function(){return n(446)}])},818:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=n(1527),a=n(4875),s=n.n(a),c=n(6349);function i(e){let{className:t,...n}=e;return(0,r.jsx)("div",{...n,className:s()("text-black w-full h-full flex items-center justify-center",t),children:(0,r.jsx)(c.uur,{className:"text-[3.125rem] animate-spin"})})}},7395:function(e,t,n){"use strict";n.d(t,{p6:function(){return o},uF:function(){return u},Ik:function(){return d},Pk:function(){return x},Pf:function(){return m}});var r=n(7306),a=n(5685);let s=a.env.NEXT_PUBLIC_API_BASE||"https://news.gtech-cn.co";var c=n(8778);function i(e){return"".concat(s).concat(e)}function l(e){let t=e.data;if(t){if(t.code&&200!==t.code)throw t.msg;return e.data}}function m(e,t){return()=>t.some(e=>!e)?(0,c._v)():e()}async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,s=await r.Z.get(i("/wechat/news?newsTypeId=".concat(e,"&invert=").concat(t,"&pageNumber=").concat(n,"&pageSize=").concat(a)));return l(s)}async function o(){let e=await r.Z.get(i("/wechat/news/types"));return l(e)}async function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=await r.Z.get(i("/wechat/news/count?newsTypeId=".concat(t,"&newsType=").concat(e)));return l(n)}async function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=await r.Z.get(i("/wechat/news/detail/".concat(e)));return l(t)}},8778:function(e,t,n){"use strict";function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(t=>{setTimeout(()=>t(void 0),e)})}function a(){return window.innerWidth<=900}n.d(t,{_v:function(){return r},tq:function(){return a}})},446:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(1527),a=n(4919),s=n(959),c=n(3517),i=n.n(c),l=n(8778),m=n(7207),d=n.n(m),o=n(4875),x=n.n(o);function u(e){let{total:t,pgSize:n,pgNum:a,onChange:c,className:i}=e,l=Math.ceil(t/n),m=(0,s.useMemo)(()=>l<=1?[]:l<=6?d().range(l).map(e=>({name:"".concat(e+1)})):a<=3?d().range(a+1).map(e=>({name:"".concat(e+1)})).concat([{name:"..."},{name:""+l}]):a>=l-2?[{name:"1"},{name:"..."}].concat(d().range(a-2,l).map(e=>({name:"".concat(e+1)}))):[{name:"1"},{name:"..."},{name:a-1+""},{name:a+""},{name:a+1+""},{name:"..."},{name:l+""}],[l,a]),o=()=>{c&&a<l&&c(d().toNumber(a+1))},u=()=>{c&&c(1)},h=()=>{c&&a>1&&c(d().toNumber(a-1))},f=()=>{c&&c(l)};return t<=n?null:(0,r.jsx)("div",{className:x()("flex justify-center text-[0.8125rem] text-center leading-8 font-semibold",i),children:(0,r.jsxs)("div",{className:"flex",children:[l>1&&(0,r.jsxs)("span",{onClick:u,className:"mx-[0.185rem] flex justify-center items-center cursor-pointer border min-w-[32px] h-[32px] rounded-lg",children:[(0,r.jsx)("img",{src:"/images/arrow_page.svg",alt:""}),(0,r.jsx)("img",{src:"/images/arrow_page.svg",alt:""})]}),l>1&&(0,r.jsx)("span",{onClick:h,className:"mx-[0.185rem] flex justify-center items-center cursor-pointer border min-w-[32px] h-[32px] rounded-lg",children:(0,r.jsx)("img",{src:"/images/arrow_page.svg",alt:""})}),m.map((e,t)=>(0,r.jsx)("div",{className:x()({"text-white bg-green-1":e.name===""+a,omit:"..."===e.name},"mx-[0.185rem] min-w-[32px] h-[32px] px-1.5 rounded-lg","..."!=e.name&&"border cursor-pointer"),onClick:()=>{c&&"..."!==e.name&&c(d().toNumber(e.name))},children:e.name},"key_page_".concat(t))),l>1&&(0,r.jsx)("span",{onClick:o,className:"mx-[0.185rem] rotate-180 flex justify-center items-center cursor-pointer border min-w-[32px] h-[32px] rounded-lg",children:(0,r.jsx)("img",{src:"/images/arrow_page.svg",alt:""})}),l>1&&(0,r.jsxs)("span",{onClick:f,className:" mx-[0.185rem] rotate-180 flex justify-center items-center cursor-pointer border min-w-[32px] h-[32px] rounded-lg",children:[(0,r.jsx)("img",{src:"/images/arrow_page.svg",alt:""}),(0,r.jsx)("img",{src:"/images/arrow_page.svg",alt:""})]})]})})}var h=n(7395),f=n(5399),p=n.n(f),g=n(818),w=n(3190);let v=e=>{let{cateId:t,data:n,setPgNum:a,tableDataTotal:c,pgNum:m,windowWidth:d}=e;return(0,r.jsxs)("div",{className:"flex flex-wrap justify-between mx-auto mt-10 rounded-lg  ".concat(d>900&&"w-container"," md:mt-5"),children:[!!n.length&&n.map((e,n)=>(0,r.jsxs)(s.Fragment,{children:[(0,l.tq)()?null:(0,r.jsx)("div",{className:"mb-5 border-t text-sk border-gray-1 md:h-[200px]"}),(0,r.jsxs)("div",{className:"flex mb-12 md:items-center md:mb-5 w-full md:w-[221px] bg-red-300 md:h-[4.875rem]",children:[(0,r.jsx)("div",{className:" w-[19.375rem] md:w-[7.375rem]    h-[16.125rem] md:h-[4.875rem] rounded-lg ",children:(0,r.jsx)("img",{className:"max-w-[19.375rem] h-[12.5rem] md:w-[7.375rem] rounded-lg md:h-[4.875rem] ",src:e.thumbUrl,alt:""})}),(0,r.jsxs)("div",{className:"flex flex-col ml-[2rem] md:ml-[10px] bg-red-600 w-full   mx-auto  justify-between  md:max-h-[4.875rem] ",children:[(0,r.jsxs)("div",{className:"h-[9.4375rem] md:overflow-hidden md:text-ellipsis md:whitespace-nowrap ",children:[(0,r.jsx)(i(),{className:" text-[20px] font-[600px] md:text-[16px] ",rel:"opener",target:(0,l.tq)()?"":"_blank",href:"/news/detail?cateId=".concat(t,"&id=").concat(e.id),children:e.title}),(0,r.jsxs)("time",{className:" md:py-0 text-[14px] md:text-[12px] flex text-gray-2",children:[(0,r.jsx)("div",{className:"mr-5 ",children:e.author}),p()(1e3*e.newsUpdateTime).format("YYYY-MM-DD HH:mm:ss")]}),(0,r.jsx)("p",{className:"md:hidden text-[14px] max-h-[300px]",children:e.digest}),(0,r.jsx)("div",{className:"flex flex-row mt-[10px] md:h-[24px]",children:null==e?void 0:e.newsTypes.map((e,t)=>(0,r.jsx)("div",{className:"mr-5 border rounded-[0.25rem] px-[10px] text-[#29953A] text-[14px] bg-[#29953A1A]",children:e.typeName},"name_".concat(t)))})]}),(0,r.jsx)("div",{className:" md:hidden h-[3.0625rem] flex items-end",children:(0,r.jsx)(i(),{className:"text-green text-[14px] ",rel:"opener",target:(0,l.tq)()?"":"_blank",href:"/news/detail?cateId=".concat(t,"&id=").concat(e.id),children:"详情 >>"})})]})]})]},"data".concat(n))),n.length?(0,r.jsx)(u,{onChange:e=>{a(e)},className:"my-8",total:c,pgSize:10,pgNum:m}):null]})},j=[{url:"/images/subtract.svg",id:1},{url:"/images/frame.svg",id:2},{url:"/images/three.svg",id:3}];function N(){let{query:e}=(0,w.useRouter)(),t=(0,s.useRef)(0),[n,c]=(0,s.useState)(0),[i,m]=(0,s.useState)(!1),[d,o]=(0,s.useState)([]),[x,u]=(0,s.useState)([]),[f,p]=(0,s.useState)(window.innerWidth),[N,b]=(0,s.useState)({}),[y,_]=(0,s.useState)(1),[k]=(0,s.useState)(10),E=async()=>{m(!0);try{let e=await (0,h.p6)(),t={};e.forEach(e=>{let{typeGroup:n}=e;t[n]||(t[n]={id:e.id,typeGroup:e.typeGroup,children:[]});let{id:r,typeName:a,createTime:s,updateTime:c}=e;t[n].children.push({id:r,typeName:a,typeGroup:n,createTime:s,updateTime:c})});let n=Object.values(t);b(n[0]),u(n)}catch(r){console.log("reeee",r)}finally{m(!1)}};(0,s.useEffect)(()=>{let t=null==e?void 0:e.cateId;if(x&&x.length&&e.cateId){let n=x.find(e=>e.id===Number(t));console.log("typetype",n),b(n)}},[e]),console.log("finalDatafinalData",x,e,N);let D=async()=>{let e=await (0,h.Pk)(null==N?void 0:N.typeName,null==N?void 0:N.id);t.current=e};(0,s.useEffect)(()=>{E()},[]),(0,s.useEffect)(()=>{let e=()=>{p(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,s.useEffect)(()=>{D()},[N.id]),(0,s.useEffect)(()=>{C()},[y,N.id,n]);let C=async()=>{let e=await (0,h.Ik)(null==N?void 0:N.id,1==n,y,k);o(e||[])},I={className:(0,l.tq)()?"":"border-b border-black"},S=()=>{c(3===n?1:n+1)};return console.log("dasda",f,x),(0,r.jsx)(a.T,{headerProps:I,children:(0,r.jsx)("div",{className:"mx-auto md:mx-3 ",children:(0,r.jsxs)("div",{className:"flex flex-wrap justify-between mx-auto mt-10 rounded-lg  ".concat(f>900&&"w-container"," md:mt-5"),children:[x.map((e,t)=>(0,r.jsxs)("div",{className:"w-[22.5rem]  h-[12.75rem]  rounded-lg shadow  \n                   ".concat(2===t?"md:w-full md:mt-5 md:h-[139px]  ":"md:w-[10.625rem] md:h-[140px] "),children:[(0,r.jsx)("div",{className:"  rounded-t-md  bg-green h-[4.25rem]  flex items-center\n                \n               ".concat(2===t?"md:w-full md:h-[50px] ":"md:w-[10.625rem] md:h-[50px]  ","\n              "),children:(0,r.jsxs)("div",{className:"flex  flex-row items-center justify-between w-full mr-[0.75rem] ",children:[(0,r.jsx)("div",{className:" ml-[1.875rem] text-white text-[1.25rem] md:text-[1.125rem]",children:e.typeGroup}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("img",{className:" w-[3.6875rem] h-[3.0625rem] md:w-[2.1875rem] md:h-[1.8125rem]",src:j[t].url,alt:""})})]})}),(0,r.jsx)("div",{className:"flex flex-row flex-wrap",children:e.children.map((e,t)=>(0,r.jsx)("div",{onClick:()=>{b(e),c(0)},className:" ".concat((null==N?void 0:N.id)===e.id?"text-[#29953A]  bg-[#29953A1A]":" bg-[#E9E9E9]"," text-[1rem] md:text-[0.875rem] cursor-pointer  min-w-[1.25rem] h-[2.375rem] md:h-[27px] flex items-center ml-5 mt-5 md:mt-[12px] rounded-[0.25rem] px-[1rem]"),children:e.typeName},"check_".concat(t)))})]},"type_".concat(t))),(0,r.jsxs)("div",{className:"mt-5 ",children:[(0,r.jsx)("div",{className:"flex flex-row items-center mx-auto md:border-b md:w-full",children:d.length?(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("div",{className:" text-[14px] c-[#DDDDDD] h-[26px]",children:"发布时间"}),(0,r.jsx)("div",{className:"ml-[10px] md:mb-[10px] mt-1",onClick:()=>S(),children:(0,r.jsx)("img",{src:{0:"/images/date.svg",1:"/images/checked_top.svg",2:"/images/checked_bottom.svg",3:"/images/date.svg"}[n],className:"h-[10.89px] w-[7.82px]",alt:""})})]}):null}),i?(0,r.jsx)(g.g,{className:"h-[22rem] "}):(0,r.jsx)(v,{cateId:null==N?void 0:N.id,data:d,setPgNum:_,windowWidth:f,tableDataTotal:t.current,pgNum:y}),i?(0,r.jsx)(g.g,{className:"pt-8"}):!(d&&d.length>0)&&(0,r.jsxs)("div",{className:"flex flex-col justify-center w-full py-20 text-center ",children:[(0,r.jsx)("div",{className:"flex justify-center ",children:(0,r.jsx)("img",{width:222,height:"125",src:"/images/noData.svg",alt:""})}),(0,r.jsx)("div",{children:"暂无数据"})]})]})]})})})}}},function(e){e.O(0,[455,222,492,725,344,401,541,919,774,888,179],function(){return e(e.s=8729)}),_N_E=e.O()}]);